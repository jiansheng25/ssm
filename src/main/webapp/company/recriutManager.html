<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ä¼ä¸šä¸»é¡µ</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/company/recriutManager.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            tiaozhuan2();
            getCompany();
            var index=1;
            $("#pre").click(function () {
                $(".rtopbpb").empty();
                if(index>=2){
                    index=index-1;
                }else {
                    index=1;
                }
                getEmployment(index);
            });
            $("#next").click(function () {
                $(".rtopbpb").empty();
                index=index+1;
                getEmployment(index);
            });
            $("#one").click(function () {
                $(".rtopbpb").empty();
                index=1;
                getEmployment(index);
            });
            getEmployment(index);
        });
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()" >
            </div>
            <div class="top2">
                æ±Ÿæµ·å¤§æ ¡å›­æ‹›è˜å¹³å°ä¼ä¸šç«¯
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd" >
                    </div>
                    <div class="top4">
                        <a href="comlogin.html" style="color:#bcbdcf ;font-size: 11px;">é€€å‡º</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xinxi" type="button" name="" value="ä¼ä¸šä¿¡æ¯" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postRecriutment"  type="button" name="" value="æ‹›è˜å‘å¸ƒ" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="èŒä½ç®¡ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="åº”è˜å¤„ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="å¯†ç ç®¡ç†" />
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <divc class="rtopp">
                        èŒä½ä¿¡æ¯ç®¡ç†
                    </divc>
                    <div class="rtopb">
                       <div class="rtopbp">
                           <div class="rtopbpp">
                               <div class="rtopbpp1">
                                    å²—ä½åç§°
                               </div>
                               <div class="rtopbpp2">
è–ªèµ„
                               </div>
                               <div class="rtopbpp3">
å‘å¸ƒæ—¥æœŸ
                               </div>
                               <div class="rtopbpp4">
å·¥ä½œæ€§è´¨
                               </div>
                               <div class="rtopbpp5">
æ“ä½œ
                               </div>
                           </div>
                           <div class="rtopbpb">

                           </div>
                       </div>
                        <div class="rtopbb">
                            <input class="chosse-page" type="button" id="one" value="é¦–é¡µ">
                           <input class="chosse-page" type="button"  id="pre" value="ä¸Šä¸€é¡µ">
                            <input class="chosse-page" type="button"  id="next" value="ä¸‹ä¸€é¡µ">
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    ç‰ˆæƒæ‰€æœ‰ï¼šä¸ªäººæ¯•ä¸šè®¾è®¡
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
<script type="text/javascript">
    function getCompany() {
        $.ajax({
            type: "post",                            //ä¼ æ•°æ®çš„æ–¹å¼
            url: commomPath+"getCompanyServlet", //servletåœ°å€
            data: {
            },
            datatype:"json",
            success: function(data){ //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                var com=$.parseJSON(data);
                $(".top44").text(com[0].name);
            },
            error : function()
            {
                alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
            }
        });
    }
    function getEmployment(index) {
            var index1=index
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath+"getEmploymentForComServlet", //servletåœ°å€getEmploymentForComServlet
                data: {
                    pageIndex:index1,
                },
                success: function(data){ //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list=$.parseJSON(data);
                    $.each(list,function(i, n){
                        var item1="<div class='rtopbpb1'>" +
                            "<div class='rtopbpb11'>" +
                            n.jobPostion+
                            "</div>"+
                            "<div class='rtopbpb12'>" +
                            n.salay+
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.postTime +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.jobtype +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='edit11' type='button'  onclick=\"editEmployment('"+n.employId+"')\" value='ç¼–è¾‘'> &nbsp" +
                            "<input class='delete11' type='button'  onclick=\"deleteEmployment('"+n.employId+"')\" value='åˆ é™¤'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error : function()
                {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
    }
    function tiaozhuan2() {
        $("#xinxi").click(function () {
            window.location.href="main.html";
        });
        $("#postRecriutment").click(function () {
            window.location.href="postRecriutment.html";
        });
        $("#recriutManager").click(function () {
            window.location.href="recriutManager.html";
        });
        $("#passwordManager").click(function () {
            window.location.href="passwordManager.html";
        });
        $("#applyManager").click(function () {
            window.location.href="applyManager.html";
        });
    }
    function tiaozhuan() {
        window.location.href="comlogin.html";
    };
    function editEmployment(employId) {
        $.cookie("employId",employId,{path:"/"});
        window.location.href="editRecriutment.html";
    }
    function deleteEmployment(employId) {

        if(confirm("ç¡®å®šåˆ é™¤å—ï¼Ÿ")){
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath+"deleteRecriutmentServlet", //servletåœ°å€
                data: {
                    employId:employId,
                },
                success: function(data){ //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                   if(data=="1"){
                       alert("åˆ é™¤æˆåŠŸï¼");
                       $(".rtopbpb").empty();
                       getEmployment(1);
                   }else {
                       alert("åˆ é™¤å¤±è´¥ï¼");
                   }
                },
                error : function()
                {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
    }
</script>