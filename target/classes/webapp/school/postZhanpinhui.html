<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>æ ¡æ–¹ä¸»é¡µ</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/school/zhaoPin.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="../js/jquery.cookie.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            load1();
            tiaozhuan2();

            var index = 1;
            $("#pre").click(function () {
                $(".manager-all-all").empty();
                if (index >= 2) {
                    index = index - 1;
                } else {
                    index = 1;
                }
                console.log(index)
                getZhaoPinTitle(index);
            });
            $("#next").click(function () {
                $(".manager-all-all").empty();
                index = index + 1;
                console.log(index)
                getZhaoPinTitle(index);
            });
            $("#one").click(function () {
                $(".manager-all-all").empty();
                index = 1;
                getZhaoPinTitle(index);
            });
            getZhaoPinTitle(index);

        });
        function getZhaoPinTitle(index) {
            var index1 = index
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "zph/findAllZphByPage", //servletåœ°å€getEmploymentForComServlet
                data: {
                    pageIndex: index1,
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list = $.parseJSON(data);
                    $("#zphList").html("");
                    $("#zphList").append($("<option value=\"0\">ï¼è¯·é€‰æ‹©æ‹›è˜ä¼šï¼</option>"));
                    $.each(list, function (i, n) {
                        var item1 = "<div class='all-tr'>" +
                            "<div class='all-tr-tr1' >"
                            + "<input class='input-change' id='n" + n.zphId + "name' readonly='readonly'  value='" + n.zhaoname + "'>" +
                            "</div>" +
                            "<div class='all-tr-tr2' >"
                            + "<input class='input-change' id='n" + n.zphId + "location' readonly='readonly'  value='" + n.location + "'>" +
                            "</div>" +
                            "<div class='all-tr-tr2'>"
                            + "<input class='input-change'  id='n" + n.zphId + "time' readonly='readonly'  value='" + n.time1 + "'>" +
                            "</div>" +
                            "<div class='all-tr-tr2' style='padding-top: 5px;height: 25px'>" +
                            "<div class='all-save-edit'>" +
                            "<input class='manager-btnSave' id='n" + n.zphId + "save'  type='button' onclick=\"saveZph('" + n.zphId + "')\"  value='ä¿å­˜'>" +
                            "<input class='manager-btnEdit' id='n" + n.zphId + "edit'  type='button'  onclick=\"editZph('" + n.zphId + "')\" value='ä¿®æ”¹'></div>" +
                            "<div class='all-delete'>" +
                            "<input class='manager-btnDelete' type='button' onclick=\"deleteZhaoTitle('" + n.zphId + "')\" value='åˆ é™¤'> </div></div>";
                        $(".manager-all-all").append(item1);


                        $("#zphList").append($("<option value=\"" + n.zphId + "\">" + n.zhaoname + "</option>"));
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }

        function addCom() {
            $(".choose-btn-namager").css("background-color", "#ffffff");
            $(".choose-btn-post").css("background-color", "#f2f2f3");
            $(".post").css("display", "none");
            $(".manager").css("display", "block");
        }

        function getId() {
            console.log($("#zphList").val())
            console.log($("#zphList").find("option:selected").text())
        }

        function addZhao() {
            $(".choose-btn-namager").css("background-color", "#f2f2f3");
            $(".choose-btn-post").css("background-color", "#ffffff");
            $(".post").css("display", "block");
            $(".manager").css("display", "none");
        }

        function postXuanTitle() {
            if ($("#zhaoname").val() == "" || $("#location").val() == "" || $("#date2").val() == "") {
                alert("è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯");
                return;
            }
            $.ajax({
                type: "POST",
                url: commomPath + "postZhaopinhuiServlet", //servletåœ°å€
                data: {
                    location: $("#location").val(),
                    zhaoname: $("#zhaoname").val(),
                    time1: $("#date2").val() + " " + $("#time2").val()
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    if (data == "1") {
                        alert("æ·»åŠ æˆåŠŸï¼");
                        $(".manager-all-all").empty();
                        getZhaoPinTitle(1)
                    } else {
                        alert("æ·»åŠ å¤±è´¥ï¼");
                    }
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }

        function deleteZhaoTitle(zhpId) {
            if (confirm("ç¡®è®¤åˆ é™¤å—ï¼Ÿ")) {
                $.ajax({
                    type: "POST",
                    url: commomPath + "deleteZhaoTitleServlet", //servletåœ°å€
                    data: {
                        zphId: zhpId
                    },
                    success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                        if (data == "1") {
                            alert("åˆ é™¤æˆåŠŸï¼");
                            $(".manager-all-all").empty();
                            getZhaoPinTitle(1)
                        } else {
                            alert("åˆ é™¤å¤±è´¥ï¼");
                        }
                    },
                    error: function () {
                        alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                    }
                })
            }
        }

        function editZph(zphId) {

            var name = "#n" + zphId + "name";
            var location = "#n" + zphId + "location";
            var time = "#n" + zphId + "time";
            // alert(name+location+time)
            $(name).removeAttr("readonly");
            $(location).removeAttr("readonly");
            $(time).removeAttr("readonly");
            $(name).css("background-color", "#ffffff");
            $(location).css("background-color", "#ffffff");
            $(time).css("background-color", "#ffffff");
            $("#n" + zphId + "edit").css("display", "none");
            $("#n" + zphId + "save").css("display", "block");
        }

        function saveZph(zphId) {

            var name = "#n" + zphId + "name";
            var location = "#n" + zphId + "location";
            var time = "#n" + zphId + "time";
            // alert(name+location+time)
            $(name).attr({"readonly": "readonly"});
            $(location).attr({"readonly": "readonly"});
            $(time).attr({"readonly": "readonly"});
            $(name).css("background-color", "#f2f2f2");
            $(location).css("background-color", "#f2f2f2");
            $(time).css("background-color", "#f2f2f2");
            $(time).css("background-color", "#f2f2f2");


            if ($(name).val() == "" || $(location).val() == "" || $(time).val() == "") {
                alert("è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯");
                return;
            }
            $.ajax({
                type: "POST",
                url: commomPath + "updateZphTitleServlet", //servletåœ°å€
                data: {
                    location: $(location).val(),
                    zhaoname: $(name).val(),
                    time1: $(time).val(),
                    zphId: zphId
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    if (data == "1") {
                        $("#n" + zphId + "edit").css("display", "block");
                        $("#n" + zphId + "save").css("display", "none");
                    } else {
                        alert("ä¿å­˜å¤±è´¥ï¼");
                    }
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }

        function addCompanyForZph() {
            if($("#zphList").val()==0){
                alert("è¯·å…ˆé€‰æ‹©æ‹›è˜ä¼š");
                return;
            }
            if($("#zphList").val()=="0"){
                alert("è¯·å…ˆé€‰æ‹©æ‹›è˜ä¼š");
                return;
            }
            if($("#name").val()==""||$("#address").val()==""||
                $("#email").val()==""||$("#postions").val()==""||
            $("#requireNumber").val()==""||$("#majors").val()==""||
            $("#phone").val()==""||$("#companyInfo").val()==""){
                alert("è¯·è¾“å…¥å¿…å¡«é¡¹ï¼");
                return;
            }

            var emailVal=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;
            var phoneVal=/^1[3456789]\d{9}$/;
            if(!emailVal.test($("#email").val())){
                alert("é‚®ç®±æ ¼å¼ä¸å¯¹");
                return;
            }
            if(!phoneVal.test($("#phone").val())){
                alert("ç”µè¯æ ¼å¼ä¸å¯¹ï¼");
                return;
            }
            $.ajax({
                type: "POST",
                url: commomPath + "addCompanyForZphServlet", //servletåœ°å€
                data: {
                    companyName: $("#companyName").val(),
                    address: $("#address").val(),
                    email: $("#email").val(),
                    postions:$("#postions").val(),
                    requireNumber: $("#requireNumber").val(),
                    majors: $("#majors").val(),
                    phone: $("#phone").val(),
                    companyInfo:$("#companyInfo").val(),
                    zphId:$("#zphList").val()
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    if (data == "1") {
                        alert("å‘å¸ƒæˆåŠŸï¼");
                    } else {
                        alert("å‘å¸ƒå¤±è´¥ï¼");
                    }
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()">
            </div>
            <div class="top2">
                æ±Ÿæµ·å¤§æ ¡å›­æ‹›è˜å¹³å°å­¦æ ¡ç«¯
            </div>
            <div class="top33">
                <div class="top44">
                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd">
                    </div>
                    <div class="top4">
                        <a href="schoollogin.html" style="color:#bcbdcf ;font-size: 11px;">é€€å‡º</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postXuan" type="button" name="" value="å‘å¸ƒå®£è®²ä¼š"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xuanjianManager" type="button" name="" value="å®£è®²ä¼šç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postZhan" type="button" name="" value="æ‹›è˜ä¼š"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="postion" value="å‘å¸ƒèŒä½"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="æ‹›è˜ç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="èŒä½ç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="companyManager" type="button" name="" value="ä¼ä¸šç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="studentManager" value="å­¦ç”Ÿç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="addStudent" value="å­¦ç”Ÿå½•å…¥"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="å¯†ç ç®¡ç†"/>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <div class="rtopb">
                        <div class="choose">
                            <div class="choose-post">
                                <input class="choose-btn-post" style="" type="button"
                                       onclick="addZhao()" value="æ·»åŠ å‚ä¸æ‹›è˜ä¼šçš„ä¼ä¸š">
                            </div>
                            <div class="choose-manager">
                                <input class="choose-btn-namager" style="" type="button"
                                       onclick="addCom()" value="æ‹›è˜ä¼šç®¡ç†">
                            </div>
                        </div>
                        <div class="post">
                            <div class="post-choose">
                                <div class="post-choose-title">è¯·é€‰æ‹©è¦æ·»åŠ çš„æ‹›è˜ä¼šï¼š</div>
                                <div class="post-choose-select">
                                    <select id="zphList" onchange="getId()">

                                    </select>
                                </div>
                            </div>
                            <div class="post-text">
                                <div class="text_title"><label style="color: red">*</label> ä¼ä¸šåç§°:</div>
                                <div class="text_text"><input class="text_input" id="companyName" type="text"
                                                              placeholder="è¯·è¾“å…¥ä¼ä¸šåç§°"></div>

                                <div class="text_title"><label style="color: red">*</label> ä¼ä¸šåœ°å€:</div>
                                <div class="text_text"><input class="text_input" type="text" id="address"
                                                              placeholder="è¯·è¾“å…¥åœ°å€"></div>

                                <div class="text_title"><label style="color: red">*</label> æŠ•é€’é‚®ç®±:</div>
                                <div class="text_text"><input class="text_input" type="email" id="email"
                                                              placeholder="è¯·è¾“å…¥é‚®ç®±"></div>

                                <div class="text_title"><label style="color: red">*</label> è”ç³»ç”µè¯:</div>
                                <div class="text_text"><input class="text_input" type="" id="phone"
                                                              placeholder="è¯·è¾“å…¥ç”µè¯"></div>

                                <div class="text_title"><label style="color: red">*</label>éœ€æ±‚èŒä½:</div>
                                <div class="text_text2"><textarea class="text_tarea" id="postions"></textarea></div>

                                <div class="text_title"><label style="color: red">*</label>éœ€æ±‚ä¸“ä¸š:</div>
                                <div class="text_text2"><textarea class="text_tarea" id="majors"></textarea></div>

                                <div class="text_title"><label style="color: red">*</label> éœ€æ±‚äººæ•°:</div>
                                <div class="text_text"><input class="text_input" type="text" id="requireNumber"
                                                              placeholder="è¯·è¾“å…¥éœ€æ±‚äººæ•°"></div>

                                <div class="text_title"></div>
                                <div class="text_text"></div>

                                <div class="text_title"><label style="color: red">*</label>ä¼ä¸šç®€ä»‹:</div>
                                <div class="text_text2" style="width: 1000px;height: 180px;">
                                    <textarea class="text_tarea" style="width: 1000px;height: 180px"
                                              id="companyInfo"></textarea>
                                </div>

                                <div class="text_title" style="width: 100%;text-align: center;margin-top: 0px">
                                    <input class="text_btn" type="button" onclick="addCompanyForZph()" value="ç¡®è®¤æ·»åŠ ">
                                </div>
                            </div>
                        </div>
                        <div class="manager">
                            <div class="manager-all">
                                <div class="all-title">æ‰€æœ‰æ‹›è˜ä¼š</div>
                                <div class="all-th">
                                    <div class="all-th-tr1">æ‹›è˜ä¼šåç§°</div>
                                    <div class="all-th-tr2">ä¸¾åŠåœ°ç‚¹</div>
                                    <div class="all-th-tr2">ä¸¾åŠæ—¶é—´</div>
                                    <div class="all-th-tr2">æ“ä½œ</div>
                                </div>
                                <div class="manager-all-all">
                                    <!--                                    <div class="all-tr">-->
                                    <!--                                        <div></div>-->
                                    <!--                                        <div class="all-tr-tr1" >-->
                                    <!--                                           <input class="input-change"  value="é˜¿æ–¯é¡¿">-->
                                    <!--                                        </div>-->
                                    <!--                                        <div class="all-tr-tr2">-->
                                    <!--                                            <input class="input-change" id="zphLocation" readonly="readonly" value="é˜¿æ–¯é¡¿">-->
                                    <!--                                        </div>-->
                                    <!--                                        <div class="all-tr-tr2">-->
                                    <!--                                            <input class="input-change"  id="zphTime" value="é˜¿æ–¯é¡¿">-->
                                    <!--                                        </div>-->
                                    <!--                                        <div class="all-tr-tr2" style='padding-top: 5px;height: 25px'>-->
                                    <!--                                            <div class="all-save-edit">-->
                                    <!--                                                <input class="manager-btnSave"  type="button" onclick="saveZph(123)"  value="ä¿å­˜">-->
                                    <!--                                                <input class="manager-btnEdit"  type="button"  onclick="editZph(123)" value="ä¿®æ”¹">-->
                                    <!--                                            </div>-->
                                    <!--                                            <div class="all-delete">-->
                                    <!--                                                <input class="manager-btnDelete" type="button" value="åˆ é™¤">-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->

                                </div>
                                <div class="all-tr">
                                    <input class="pageIndex" id="one" type="button" value="é¦–é¡µ">
                                    <input class="pageIndex" id="pre" type="button" value="ä¸Šä¸€é¡µ">
                                    <input class="pageIndex" id="next" type="button" value="ä¸‹ä¸€é¡µ">
                                </div>
                            </div>
                            <div class="manager-add">
                                <label style="font-weight: 700;color: red">
                                    &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
                                    &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                                    æ·»åŠ æ‹›è˜ä¼š</label><br><br><br>
                                <div class="add-title"><label style="color: red">*</label> æ‹›è˜ä¼šåç§°:</div>
                                <div class="add-text">
                                    <input class="add-text-input" id="zhaoname" type="text" placeholder="è¾“å…¥æ‹›è˜ä¼šåç§°">
                                </div>

                                <div class="add-title"><label style="color: red">*</label> ä¸¾åŠåœ°ç‚¹:</div>
                                <div class="add-text">
                                    <input class="add-text-input" id="location" type="text" placeholder="è¾“å…¥ä¸¾åŠåœ°ç‚¹">
                                </div>

                                <div class="add-title"><label style="color: red">*</label> ä¸¾åŠæ—¶é—´:</div>
                                <div class="add-text">
                                    <input class="add-text-input" id="date2" style="width: 180px" type="date">
                                    <input class="add-text-input" id="time2" style="width: 180px" type="time">
                                </div>
                                <br>
                                &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
                                <input class="add-btn" type="button" onclick="postXuanTitle()" value="æ·»åŠ ">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    ç‰ˆæƒæ‰€æœ‰ï¼šä¸ªäººæ¯•ä¸šè®¾è®¡
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
<script type="text/javascript">
    function tiaozhuan() {
        window.location.href = "comlogin.html";
    };

    function tiaozhuan2() {
        $("#postZhan").click(function () {
            window.location.href = "postZhanpinhui.html";
        })
        $("#postXuan").click(function () {
            window.location.href = "main.html";
        })
        $("#companyManager").click(function () {
            window.location.href = "companyManager.html";
        })
        $("#studentManager").click(function () {
            window.location.href = "studentManager.html";
        })
        $("#recriutManager").click(function () {
            window.location.href = "recriutManager.html";
        })
        $("#passwordManager").click(function () {
            window.location.href = "passwordManager.html";
        })
        $("#addStudent").click(function () {
            window.location.href = "addStudent.html";
        })
        $("#postion").click(function () {
            window.location.href = "postion.html";
        })
        $("#applyManager").click(function () {
            window.location.href = "applyManager.html";
        })
        $("#xuanjianManager").click(function () {
            window.location.href = "xuanjianManager.html";
        })
    }

    function load1() {//è·å–å½“å‰ç®¡ç†å‘˜
        $.ajax({
            type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
            url: commomPath + "sc/scInfo", //servletåœ°å€
            data: {},
            datatype: "json",
            success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                var schoolJson = $.parseJSON(data);
                $(".top44").text(schoolJson.name);
            },
            error: function () {
                alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
            }
        })
    }
</script>