<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>校方主页</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/school/postion.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="../js/jquery.cityselect.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            load1();
            tiaozhuan2();
            $("#city_1").citySelect();
            $("#city_2").citySelect({
                prov:"北京",
                nodata:"none"
            });
            getRecriutmentDetail();
            updateRecriutment();
        });
        function getRecriutmentDetail() {
            $.ajax({
                type: "post",                            //传数据的方式
                url: commomPath + "getPosDetailServlet", //servlet地址
                data: {
                    employId:$.cookie("employId")
                },
                datatype: "json",
                success: function (data) { //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                    var com = $.parseJSON(data);
                    $("#cities").html(com[0].workPlace);
                    $("#require").val(com[0].require1);
                    $("#salay").val(com[0].salay);
                    $("#jobDetail").val(com[0].jobDetail);
                    $("#diploma").val(com[0].diploma);
                    $("#number").val(com[0].number1);
                    $("#jobPostion").val(com[0].jobPostion);
                    $("#majors").val(com[0].majors);
                    $("#jobtype").val(com[0].jobtype);
                    $("#hrm").val(com[0].hrm);

                    $("#name").val(com[0].name);
                    $("#adress").val(com[0].adress);
                    $("#email").val(com[0].email);
                    $("#xingzhi").val(com[0].xingzhi);
                    $("#companytype").val(com[0].companyType);
                    $("#renshu").val(com[0].renshu);
                },
                error: function () {
                    alert("信息传输发生错误！");
                }
            });
        }
        function addCity() {
            if($("#cities").html()==""){
                $("#cities").html($('.city option:selected').text());
            }else {
                $("#cities").html($("#cities").html()+"、"+$('.city option:selected').text());
            }
        }
        function cleanCity() {
            $("#cities").html("");
        }
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()" >
            </div>
            <div class="top2">
                江海大校园招聘平台学校端
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd" >
                    </div>
                    <div class="top4">
                        <a href="schoollogin.html" style="color:#bcbdcf ;font-size: 11px;">退出</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postXuan" type="button" name="" value="发布宣讲会" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xuanjianManager" type="button" name="" value="宣讲会管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postZhan" type="button" name="" value="招聘会" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="postion" value="发布职位" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="招聘管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="职位管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="companyManager" type="button" name="" value="企业管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="studentManager" value="学生管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="addStudent" value="学生录入" />
                    </div>
                </div>

                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="密码管理" />
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <div class="rtopp">
                        <div class="top-title">发布职位</div>
                        <div class="top-btn"><input class="rbtn" type="button" value="修改" ></div>

                    </div>
                    <div class="rtopb">
                        <div class="company-part">
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label> 企业名称:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="name" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label> 企业地址:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="adress" style="border-color:#fbfbfb " >
                                </div>
                            </div>

                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>企业邮箱:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="email" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label> 企业性质:
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="xingzhi" >
                                        <option value ="民营企业">民营企业</option>
                                        <option value ="事业单位">事业单位</option>
                                        <option value="国企">国企</option>
                                        <option value="外资企业">外资企业</option>
                                        <option value ="中外合资">中外合资</option>
                                    </select>
                                    <!--                                    <input class="btn11l11" type="text" id="xingzhi" style="border-color:#fbfbfb " >-->
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>企业类型:
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="companytype" >
                                        <option value ="互联网|计算机">互联网|计算机</option>
                                        <option value ="金融|银行">金融|银行</option>
                                        <option value="保险">保险</option>
                                        <option value="医疗">医疗</option>
                                        <option value ="物流运输">物流运输</option>
                                        <option value ="化工|能源">化工|能源</option>
                                        <option value ="服务业">服务业</option>
                                        <option value="政府">政府</option>
                                        <option value="媒体|广告">媒体|广告</option>
                                        <option value=其他">其他</option>
                                    </select>
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>企业规模:
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="renshu">
                                        <option value ="1~50人">1~50人</option>
                                        <option value ="50~100人">50~100人</option>
                                        <option value="100~500人">100~500人</option>
                                        <option value="500~1000人">500~1000人</option>
                                        <option value ="1000人以上">1000人以上</option>
                                    </select>
                                </div>
                            </div>

                        </div>
                        <div class="rtopbl">
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>职位名称:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="jobPostion" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>招聘负责人:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="hrm" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>添加工作城市:
                                </div>
                                <div class="rtopbl12">
                                    <!--                                    <input class="btn11l11" type="text" id="workPlace" style="border-color:#fbfbfb " >-->
                                    <div class="choose-ctiy"></div>
                                    <div id="city_1">
                                        <select class="prov"></select>
                                        <select class="city" disabled="disabled" onchange="addCity()" value=""></select>
                                    </div>

                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111" style="background-color: white">
                                    <label btn11l11 style="background-color: white" id="cities"></label>
                                </div>
                                <div class="rtopbl12">
                                    <!--                                    <input class="btn11l11" type="text" id="workPlace" style="border-color:#fbfbfb " >-->
                                    <div class="choose-ctiy"></div>
                                    <div id="city_" style="padding-top: 3px">
                                        <input type="button" value="清空重置" onclick="cleanCity()">
                                    </div>

                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>招聘人数:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="number" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>专业要求:
                                </div>
                                <div class="rtopbl12">
                                    <input class="btn11l11" type="text" id="majors" style="border-color:#fbfbfb " >
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>薪资:
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="salay" >
                                        <option value ="1-2k">1-2k</option>
                                        <option value ="2-4k">2-4k</option>
                                        <option value="4-6k">4-6k</option>
                                        <option value="6-8k">6-8k</option>
                                        <option value ="8k以上">8k以上</option>
                                    </select>
                                    <!--                                    <input class="btn11l11" type="text" id="xingzhi" style="border-color:#fbfbfb " >-->
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>职位性质：
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="jobtype" >
                                        <option value ="全职">全职</option>
                                        <option value ="兼职">兼职</option>
                                        <option value="实习">实习</option>
                                    </select>
                                    <!--                                    <input class="btn11l11" type="text" id="xingzhi" style="border-color:#fbfbfb " >-->
                                </div>
                            </div>
                            <div class="rtopbl1">
                                <div class="rtopb111">
                                    <label style="color: red;font-size: 10px"> *</label>学历要求:
                                </div>
                                <div class="rtopbl12">
                                    <select class="btn11l11" id="diploma" >
                                        <option value ="学历不限">学历不限</option>
                                        <option value ="初中及以上">初中及以上</option>
                                        <option value ="初中及以上">高中、中专及以上</option>
                                        <option value="大专及以上">大专及以上</option>
                                        <option value="本科及以上">本科及以上</option>
                                        <option value ="硕士及以上">硕士及以上</option>
                                        <option value ="博士">博士</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="rtopbr">
                            <div class="rtopbr1">
                                <div class="rtopbr11">
                                    <label style="color: red;font-size: 10px"> *</label>任职要求：
                                </div>
                                <div class="rtopbr12">
                                    <textarea class="rtopbr1t" id="require"></textarea>
                                </div>
                            </div>
                            <div class="rtopbr2">
                                <div class="rtopbr21">
                                    <label style="color: red;font-size: 10px"> *</label>工作内容：
                                </div>
                                <div class="rtopbr22">
                                    <textarea class="rtopbr2t" id="jobDetail"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    版权所有：个人毕业设计
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
<script type="text/javascript">
    function tiaozhuan() {
        window.location.href="comlogin.html";
    };
    function tiaozhuan2() {
        $("#postZhan").click(function () {
            window.location.href="postZhanpinhui.html";
        })
        $("#postXuan").click(function () {
            window.location.href="main.html";
        })
        $("#companyManager").click(function () {
            window.location.href="companyManager.html";
        })
        $("#studentManager").click(function () {
            window.location.href="studentManager.html";
        })
        $("#recriutManager").click(function () {
            window.location.href="recriutManager.html";
        })
        $("#passwordManager").click(function () {
            window.location.href="passwordManager.html";
        })
        $("#addStudent").click(function () {
            window.location.href="addStudent.html";
        })
        $("#postion").click(function () {
            window.location.href="postion.html";
        })
        $("#applyManager").click(function () {
            window.location.href="applyManager.html";
        })
        $("#xuanjianManager").click(function () {
            window.location.href="xuanjianManager.html";
        })
    }
    function load1() {//获取当前管理员
        $.ajax({
            type: "POST",                            //传数据的方式
            url: commomPath+"sc/scInfo", //servlet地址
            data: {
            },
            datatype:"json",
            success: function(data){ //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                var schoolJson=$.parseJSON(data);
                $(".top44").text(schoolJson.name);
            },
            error : function()
            {
                alert("信息传输发生错误！");
            }
        })
    }

    function updateRecriutment() {
        $(".rbtn").click(function() {
            if($("#workPlace").val()==""||
                $("#require").val()==""||
                $("#salay").val()==""||
                $("#jobDetail").val()==""||
                $("#diploma").val()==""||
                $("#number").val()==""||
                $("#jobPostion").val()==""||
                $("#majors").val()==""||
                $("#hrm").val()==""||
                $("#jobtype").val()==""||$("#name").val()==""
                ||$("#adress").val()==""
                ||$("#email").val()==""
                ||$("#xingzhi").val()==""
                ||$("#companytype").val()==""
                ||$("#renshu").val()==""){
                alert("请输入必填信息！");
                return;
            }
            $.ajax({
                type: "POST",                            //传数据的方式
                url: commomPath+"updatePostionForScServlet", //servlet地址
                data: {
                    employId:$.cookie("employId"),
                    workPlace:$("#cities").html(),
                    require1:$("#require").val(),
                    salay:$("#salay").val(),
                    jobDetail:$("#jobDetail").val(),
                    diploma:$("#diploma").val(),
                    number:$("#number").val(),
                    jobPostion:$("#jobPostion").val(),
                    majors:$("#majors").val(),
                    jobtype:$("#jobtype").val(),
                    hrm:$("#hrm").val(),

                    name:$("#name").val(),
                    adress:$("#adress").val(),
                    email:$("#email").val(),
                    xingzhi:$("#xingzhi").val(),
                    companyType:$("#companytype").val(),
                    renshu:$("#renshu").val()
                },
                success: function(data){ //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                    if(data=="1"){
                        alert("修改成功！");
                    }else {
                        alert("修改失败");
                    }
                },
                error : function()
                {
                    alert("信息传输错误！");
                }
            })
        });
    }
</script>