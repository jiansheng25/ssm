<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ä¼ä¸šä¸»é¡µ</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/company/passwordManager.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            tiaozhuan2();
            getCompany();
        });

        function tiaozhuan() {
            window.location.href = "comlogin.html";
        };

        function tiaozhuan2() {
            $("#xinxi").click(function () {
                window.location.href = "main.html";
            });
            $("#postRecriutment").click(function () {
                window.location.href = "postRecriutment.html";
            });
            $("#recriutManager").click(function () {
                window.location.href = "recriutManager.html";
            });
            $("#passwordManager").click(function () {
                window.location.href = "passwordManager.html";
            });
            $("#applyManager").click(function () {
                window.location.href = "applyManager.html";
            });
        }

        function changePwd() {
            if ($("#oldPwd").val() == "" && $("#newPwd1").val() == "" && $("#newPwd2").val() == "") {
                alert("å¯†ç ä¸èƒ½ä¸ºç©ºï¼");return;
            }
            if ($("#newPwd1").val() != $("#newPwd2").val()) {
                alert("ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ï¼");return;
            }
            if ($("#newPwd1").val().length < 6 && $("#newPwd2").val().length < 6) {
                alert("å¯†ç æœ€å°‘6ä½ï¼"); return;
            }
            $.ajax({
                type: "post",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "chanePwdForComServlet", //servletåœ°å€
                data: {
                    oldPwd:$("#oldPwd").val(),
                    newPwd:$("#newPwd1").val()
                },
                datatype: "json",
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    if(data=="1"){
                        alert("ä¿®æ”¹æˆåŠŸ");
                    }else {
                        alert("è´¦å·æˆ–å¯†ç é”™è¯¯ï¼")
                    }
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
                }
            });
        }
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()">
            </div>
            <div class="top2">
                æ±Ÿæµ·å¤§æ ¡å›­æ‹›è˜å¹³å°ä¼ä¸šç«¯
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd">
                    </div>
                    <div class="top4">
                        <a href="comlogin.html" style="color:#bcbdcf ;font-size: 11px;">é€€å‡º</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xinxi" type="button" name="" value="ä¼ä¸šä¿¡æ¯"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postRecriutment" type="button" name="" value="æ‹›è˜å‘å¸ƒ"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="èŒä½ç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="åº”è˜å¤„ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="å¯†ç ç®¡ç†"/>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <div class="changepwd">

                        <div class="pwd-item">
                            <div class="pwd-item-tile">æ—§å¯†ç :</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="oldPwd" placeholder="è¯·è¾“å…¥å¯†ç "/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <div class="pwd-item-tile">æ–°å¯†ç :</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="newPwd1" placeholder="è¯·è¾“å…¥å¯†ç "/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <div class="pwd-item-tile">ç¡®è®¤å¯†ç :</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="newPwd2" placeholder="è¯·è¾“å…¥å¯†ç "/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <input class="pwd-btn" type="button" onclick="changePwd()" id="changPwd" value="ç¡®è®¤ä¿®æ”¹"/>
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    ç‰ˆæƒæ‰€æœ‰ï¼šä¸ªäººæ¯•ä¸šè®¾è®¡
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
<script type="text/javascript">
    function getCompany() {
        $.ajax({
            type: "post",                            //ä¼ æ•°æ®çš„æ–¹å¼
            url: commomPath + "getCompanyServlet", //servletåœ°å€
            data: {},
            datatype: "json",
            success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                var com = $.parseJSON(data);
                $("#name").val(com[0].name);
                $("#adress").val(com[0].adress);
                $("#phone").val(com[0].phone);
                $("#email").val(com[0].email);
                $("#xingzhi").val(com[0].xingzhi);
                $("#companytype").val(com[0].companyType);
                $("#renshu").val(com[0].renshu);
                $("#treatment").val(com[0].treatment);
                $("#companyInfo").val(com[0].companyInfo);
                $(".top44").text(com[0].name);
            },
            error: function () {
                alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
            }
        });
    }
</script>