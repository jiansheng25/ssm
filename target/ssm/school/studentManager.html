<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ä¼ä¸šä¸»é¡µ</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/school/studentManager.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="../js/jquery.cookie.js" type="text/javascript"></script>
    <script type="text/javascript">
        var that=this;
        var index=1;
        var choice="all";
        $(document).ready(function () {
            load1()
            tiaozhuan2();
            init();
            $("#pre").click(function () {
                $(".rtopbpb").empty();
                if(that.index>=2){
                    that.index=that.index-1;
                }else {
                    that.index=1;
                }
                console.log(that.choice)
                if(that.choice=="all"){
                    getAllStudent();
                }else if(that.choice=="xueyaun"){
                    getClassByXyId();
                }else {
                    getStudentByclass();
                }
            });
            $("#next").click(function () {
                $(".rtopbpb").empty();
                that.index=that.index+1;
                console.log(that.choice)
                if(that.choice=="all"){
                    getAllStudent();
                }else if(that.choice=="xueyaun"){
                    getClassByXyId();
                }else {
                    getStudentByclass();
                }
            });
            $("#one").click(function () {
                $(".rtopbpb").empty();
                that.index=1;
                console.log(that.choice)
                if(that.choice=="all"){
                    getAllStudent();
                }else if(that.choice=="xueyaun"){
                    getClassByXyId();
                }else {
                    getStudentByclass();
                }
            });
            getAllStudent();
        });
        function getClassByXyId(){
            that.choice="xueyuan";
            console.log(that.choice)
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "sc/findClassByXy", //servletåœ°å€getEmploymentForComServlet
                data: {
                    xyId:$("#xyList").val(),
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list = $.parseJSON(data);
                    $("#classList").html("");
                    $("#classList").append($("<option value=\"0\">ï¼è¯·é€‰æ‹©ç­çº§ï¼</option>"));
                    $.each(list, function (i, n) {
                        $("#classList").append($("<option value=\"" + n.className + "\">" + n.className + "</option>"));
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
            console.log(that.choice)
            console.log(that.index)
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "sc/findStuByXyId", //servletåœ°å€getEmploymentForComServlet
                data: {
                    xyId:$("#xyList").val(),
                    pageIndex:that.index
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list=$.parseJSON(data);
                    $(".rtopbpb").empty();
                    $.each(list,function(i, n){
                        var item1="<div class='rtopbpb1'>" +
                            "<div class='rtopbpb11'>" +
                            n.xyName+
                            "</div>"+
                            "<div class='rtopbpb12'>" +
                            n.stuClass+
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuAccount +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuName +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='caozuo_edit' type='button' onclick=\"editStu('"+n.stuId+"')\" value='ä¿®æ”¹'> &nbsp" +
                            "<input class='caozuo_delete' type='button' onclick=\"delete1('"+n.stuAccount+"')\" value='åˆ é™¤'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
        function getStudentByclass() {
            // that.choice="class";
            console.log(that.choice)
            console.log(that.index)
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "sc/findStuByClass", //servletåœ°å€getEmploymentForComServlet
                data: {
                    stuClass:$("#classList").val(),
                    pageIndex:that.index
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list=$.parseJSON(data);
                    $(".rtopbpb").empty();
                    $.each(list,function(i, n){
                        var item1="<div class='rtopbpb1'>" +
                            "<div class='rtopbpb11'>" +
                            n.xyName+
                            "</div>"+
                            "<div class='rtopbpb12'>" +
                            n.stuClass+
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuAccount +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuName +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='caozuo_edit' type='button'  onclick=\"editStu('"+n.stuId+"')\" value='ä¿®æ”¹'> &nbsp" +
                            "<input class='caozuo_delete' type='button'  onclick=\"delete1('"+n.stuAccount+"')\" value='åˆ é™¤'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
        function init() {
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "sc/findAllXy", //servletåœ°å€getEmploymentForComServlet
                data: {
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list = $.parseJSON(data);
                    $("#xyList").html("");
                    $("#classList").html("");


                    $("#xyList").append($("<option value=\"0\">ï¼è¯·é€‰æ‹©å­¦é™¢ï¼</option>"));
                    $("#classList").append($("<option value=\"0\">ï¼è¯·é€‰æ‹©ç­çº§ï¼</option>"));
                    $.each(list, function (i, n) {
                        $("#xyList").append($("<option value=\"" + n.xyId + "\">" + n.xyName + "</option>"));
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
        function load1() {//è·å–å½“å‰ç®¡ç†å‘˜
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath+"sc/scInfo", //servletåœ°å€
                data: {
                },
                datatype:"json",
                success: function(data){ //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var schoolJson=$.parseJSON(data);
                    $(".top44").text(schoolJson.name);
                },
                error : function()
                {
                    alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
                }
            })
        }
        function getAllStudent() {
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath+"sc/findAllStu", //servletåœ°å€
                data: {
                    pageIndex:that.index,
                },
                success: function(data){ //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list=$.parseJSON(data);
                    $.each(list,function(i, n){
                        var item1="<div class='rtopbpb1' id='n"+n.stuAccount+"'>"+
                            "<div class='rtopbpb11'>" +
                            n.xyName+
                            "</div>"+
                            "<div class='rtopbpb12'>" +
                            n.stuClass+
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuAccount +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuName +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='caozuo_edit' type='button'  onclick=\"editStu('"+n.stuId+"')\" value='ä¿®æ”¹'> &nbsp" +
                            "<input class='caozuo_delete' type='button'  onclick=\"delete1('"+n.stuAccount+"')\" value='åˆ é™¤'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error : function()
                {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
        function tiaozhuan2() {
            $("#postZhan").click(function () {
                window.location.href="postZhanpinhui.html";
            })
            $("#postXuan").click(function () {
                window.location.href="main.html";
            })
            $("#companyManager").click(function () {
                window.location.href="companyManager.html";
            })
            $("#studentManager").click(function () {
                window.location.href="studentManager.html";
            })
            $("#recriutManager").click(function () {
                window.location.href="recriutManager.html";
            })
            $("#passwordManager").click(function () {
                window.location.href="passwordManager.html";
            })
            $("#addStudent").click(function () {
                window.location.href="addStudent.html";
            })
            $("#postion").click(function () {
                window.location.href="postion.html";
            })
            $("#applyManager").click(function () {
                window.location.href="applyManager.html";
            })
            $("#xuanjianManager").click(function () {
                window.location.href="xuanjianManager.html";
            })
        }
        function tiaozhuan() {
            window.location.href="comlogin.html";
        };
        function editStu(employId) {
            console.log("1212121"+employId);
            $.cookie("stuAccount",employId,{path:"/"});
            window.location.href="editStudent.html";
        }
        function delete1(employId) {
            if(confirm("ç¡®å®šåˆ é™¤å—ï¼Ÿ")){
                $.ajax({
                    type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                    url: commomPath + "deleteStudentByStuIdServlet", //servletåœ°å€getEmploymentForComServlet
                    data: {
                        stuAccount:employId
                    },
                    success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                        if(data=="1"){
                            alert("åˆ é™¤æˆåŠŸï¼");
                            $("#n"+employId).remove();
                        }else {
                            alert("åˆ é™¤å¤±è´¥ï¼");
                        }
                    },
                    error: function () {
                        alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                    }
                })
            }
        }
        function getStudentByStuId() {
            if($("#stuAccount1").val()==""){
                alert("è¯·è¾“å…¥å­¦å·å†æœç´¢ï¼")
                return ;
            }
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                    url: commomPath + "getStudentByStuAccountServlet", //servletåœ°å€getEmploymentForComServlet
                data: {
                    stuAccount:$("#stuAccount1").val(),
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list=$.parseJSON(data);
                    $(".rtopbpb").empty();
                    $.each(list,function(i, n){
                        var item1="<div class='rtopbpb1'>" +
                            "<div class='rtopbpb11'>" +
                            n.xyName+
                            "</div>"+
                            "<div class='rtopbpb12'>" +
                            n.stuClass+
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuAccount +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuName +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='caozuo_edit' type='button' onclick=\"editStu('"+n.stuId+"')\" value='ä¿®æ”¹'> &nbsp" +
                            "<input class='caozuo_delete' type='button' onclick=\"delete1('"+n.stuAccount+"')\" value='åˆ é™¤'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()" >
            </div>
            <div class="top2">
                æ±Ÿæµ·å¤§æ ¡å›­æ‹›è˜å¹³å°å­¦æ ¡ç«¯
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd" >
                    </div>
                    <div class="top4">
                        <a href="comlogin.html" style="color:#bcbdcf ;font-size: 11px;">é€€å‡º</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postXuan" type="button" name="" value="å‘å¸ƒå®£è®²ä¼š" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xuanjianManager" type="button" name="" value="å®£è®²ä¼šç®¡ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postZhan" type="button" name="" value="æ‹›è˜ä¼š" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="postion" value="å‘å¸ƒèŒä½" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="æ‹›è˜ç®¡ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="èŒä½ç®¡ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="companyManager" type="button" name="" value="ä¼ä¸šç®¡ç†" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="studentManager" value="å­¦ç”Ÿç®¡ç†" />
                    </div>
                </div>

                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="addStudent" value="å­¦ç”Ÿå½•å…¥" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="å¯†ç ç®¡ç†" />
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <divc class="rtopp">
                        å­¦ç”Ÿç®¡ç†
                    </divc>
                    <divc class="rtoppfff">
                        <div class="search_xy">
                            <select id="xyList" onchange="getClassByXyId()">

                            </select>
                        </div>
                        <div class="search_class">
                            <select id="classList" onchange="getStudentByclass()">

                            </select>
                        </div>
                        <div class="search_id">
                            <input class="text_stuId" type="text" id="stuAccount1" placeholder="è¾“å…¥å­¦å·æŸ¥è¯¢">
                            <input class="btn_search" type="button" onclick="getStudentByStuId()" value="æŸ¥è¯¢">
                        </div>
                    </divc>
                    <div class="rtopb">
                       <div class="rtopbp">
                           <div class="rtopbpp">
                               <div class="rtopbpp1">
                                   å­¦é™¢
                               </div>
                               <div class="rtopbpp2">
                                    ç­çº§
                               </div>
                               <div class="rtopbpp3">
                                    å­¦å·
                               </div>
                               <div class="rtopbpp4">
                                    å§“å
                               </div>
                               <div class="rtopbpp5">
                                    æ“ä½œ
                               </div>
                           </div>
                           <div class="rtopbpb">
                           </div>
                       </div>
                        <div class="rtopbb">
                            <input class="chosse-page" type="button"  id="one" value="é¦–é¡µ">
                           <input class="chosse-page" type="button"  id="pre" value="ä¸Šä¸€é¡µ">
                            <input class="chosse-page" type="button"  id="next" value="ä¸‹ä¸€é¡µ">
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    ç‰ˆæƒæ‰€æœ‰ï¼šä¸ªäººæ¯•ä¸šè®¾è®¡
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
