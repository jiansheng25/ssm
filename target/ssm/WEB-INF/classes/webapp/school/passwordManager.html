<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>校方主页</title>
    <script src="../js/mainJs.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/school/passwordManager.css"/>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            load1();
            postXuanjianghui();
            tiaozhuan2();
        });
        function changePwd() {
            if ($("#oldPwd").val() == "" && $("#newPwd1").val() == "" && $("#newPwd2").val() == "") {
                alert("密码不能为空！");return;
            }
            if ($("#newPwd1").val() != $("#newPwd2").val()) {
                alert("两次密码不一致！");return;
            }
            if ($("#newPwd1").val().length < 6 && $("#newPwd2").val().length < 6) {
                alert("密码最少6位！"); return;
            }
            $.ajax({
                type: "post",                            //传数据的方式
                url: commomPath + "changeScoolPwdServlet", //servlet地址
                data: {
                    oldPwd:$("#oldPwd").val(),
                    newPwd:$("#newPwd1").val()
                },
                datatype: "json",
                success: function (data) { //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                    if(data=="1"){
                        alert("修改成功");
                    }else {
                        alert("账号或密码错误！")
                    }
                },
                error: function () {
                    alert("信息传输发生错误！");
                }
            });
        }
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()" >
            </div>
            <div class="top2">
                江海大校园招聘平台学校端
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd" >
                    </div>
                    <div class="top4">
                        <a href="schoollogin.html" style="color:#bcbdcf ;font-size: 11px;">退出</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postXuan" type="button" name="" value="发布宣讲会" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xuanjianManager" type="button" name="" value="宣讲会管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postZhan" type="button" name="" value="招聘会" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="postion" value="发布职位" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="招聘管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="职位管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" id="companyManager" type="button" name="" value="企业管理" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="studentManager" value="学生管理" />
                    </div>
                </div>

                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="addStudent" value="学生录入" />
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        🏐
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="密码管理" />
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <div class="changepwd">
                        <div class="pwd-item">
                            <div class="pwd-item-tile">旧密码:</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="oldPwd" placeholder="请输入密码"/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <div class="pwd-item-tile">新密码:</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="newPwd1" placeholder="请输入密码"/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <div class="pwd-item-tile">确认密码:</div>
                            <div class="pwd-item-text">
                                <input class="pwd-input" type="password" id="newPwd2" placeholder="请输入密码"/>
                            </div>
                        </div>
                        <div class="pwd-item">
                            <input class="pwd-btn" type="button" onclick="changePwd()" id="changPwd" value="确认修改"/>
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    版权所有：个人毕业设计
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
<script type="text/javascript">
    function tiaozhuan() {
        window.location.href="comlogin.html";
    };
    function tiaozhuan2() {
        $("#postZhan").click(function () {
            window.location.href="postZhanpinhui.html";
        })
        $("#postXuan").click(function () {
            window.location.href="main.html";
        })
        $("#companyManager").click(function () {
            window.location.href="companyManager.html";
        })
        $("#studentManager").click(function () {
            window.location.href="studentManager.html";
        })
        $("#recriutManager").click(function () {
            window.location.href="recriutManager.html";
        })
        $("#passwordManager").click(function () {
            window.location.href="passwordManager.html";
        })
        $("#addStudent").click(function () {
            window.location.href="addStudent.html";
        })
        $("#postion").click(function () {
            window.location.href="postion.html";
        })
        $("#applyManager").click(function () {
            window.location.href="applyManager.html";
        })
        $("#xuanjianManager").click(function () {
            window.location.href="xuanjianManager.html";
        })
    }
    function load1() {//获取当前管理员
        $.ajax({
            type: "POST",                            //传数据的方式
            url: commomPath+"sc/scInfo", //servlet地址
            data: {
            },
            datatype:"json",
            success: function(data){ //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                var schoolJson=$.parseJSON(data);
                $(".top44").text(schoolJson.name);
            },
            error : function()
            {
                alert("信息传输发生错误！");
            }
        })
    }
    function addText() {
        $("#huizong").text($("#huizong").text()+"职位名称:"+$("#jobPostion").val()+".需求人数"+$("#number").val()+"人.需求专业:"+$("#majors").val()+";")
        $("#jobPostion").val("");
        $("#number").val("");
        $("#majors").val("");
    }
    function postXuanjianghui() {
        $(".rbtn").click(function() {
            $.ajax({
                type: "POST",                            //传数据的方式
                url: commomPath+"postXuanjiangServlet", //servlet地址
                data: {
                    name:$("#name").val(),
                    adress:$("#adress").val(),
                    email:$("#email").val(),
                    xingzhi:$("#xingzhi").val(),
                    companyType:$("#companytype").val(),
                    renshu:$("#renshu").val(),
                    companyInfo:$("#companyInfo").val(),
                    huizong:$("#huizong").val(),
                    time1:$("#time1").val(),
                    location:$("#location").val(),
                    process:$("#process").val()
                },
                success: function(data){ //传数据成功之后的操作   result是servlet传过来的数据  这个函数对result进行处理，让它显示在 输入框中
                    if(data=="1"){
                        alert("发布成功！");
                    }else {
                        alert("发布失败！");
                    }
                },
                error : function()
                {
                    alert("信息传输错误！");
                }
            })
        });
    }
</script>