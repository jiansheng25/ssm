<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ä¼ä¸šä¸»é¡µ</title>
    <link rel="stylesheet" type="text/css" href="../css/company/applyManager.css"/>
    <script src="../js/mainJs.js"></script>
    <script src="../js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script type="text/javascript">
        var status = "å¾…å¤„ç†";
        var index = 1;
        var that = this;
        console.log(that.index + "-------------");
        $(document).ready(function () {
            tiaozhuan2();
            getCompany();
            // waitingStatus();
            // accpetStatus();
            // refuseStatus();

            $("#pre").click(function () {
                console.log(that.status)
                $(".rtopbpb").empty();
                if (that.index >= 2) {
                    that.index = that.index - 1;
                } else {
                    that.index = 1;
                }
                console.log(that.index)
                getEmployment(that.index);
            });
            $("#next").click(function () {
                console.log(that.status);
                $(".rtopbpb").empty();
                that.index = that.index + 1;
                console.log(that.index)
                getEmployment(that.index);
            });
            $("#one").click(function () {
                console.log(that.status)
                $(".rtopbpb").empty();
                that.index = 1;
                console.log(that.index)
                getEmployment(that.index);
            });
            getEmployment(that.index);
        });
        function waitingStatus() {
            that.index = 1;
            $(".rtopbpb").empty();
            that.status = "å¾…å¤„ç†";
            getEmployment(that.index);
            console.log(that.status)
            // $(".waiting-btn").css("background-color", "white");
            // $(".accpet-btn").css("background-color", "#d9d9d9");
            // $(".refuse-btn").css("background-color", "#d9d9d9");
        }
        function accpetStatus() {
            that.index = 1;
            $(".rtopbpb").empty();
            that.status = "å·²å½•ç”¨";
            getEmployment(that.index);
            // $(".waiting-btn").css("background-color", "#d9d9d9");
            // $(".accpet-btn").css("background-color", "white");
            // $(".refuse-btn").css("background-color", "#d9d9d9");
        }
        function refuseStatus() {
            that.index = 1;
            $(".rtopbpb").empty();
            that.status = "æœªå½•ç”¨";
            getEmployment(that.index);
            // $(".waiting-btn").css("background-color", "#d9d9d9");
            // $(".accpet-btn").css("background-color", "#d9d9d9");
            // $(".refuse-btn").css("background-color", "white");
        }
        function getEmployment(index1) {
            var status1 = that.status;
            console.log(status1)
            console.log(index1);
            $.ajax({
                type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "getEmploymentServlet", //servletåœ°å€
                data: {
                    pageIndex: index1,
                    status: status1
                },
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var list = $.parseJSON(data);
                    $.each(list, function (i, n) {
                        var item1 = "<div class='rtopbpb1'>" +
                            "<div class='rtopbpb11'>" +
                            n.jobPostion +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.stuName +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.applyTime +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            n.status +
                            "</div>" +
                            "<div class='rtopbpb12'>" +
                            "<input class='resume1' type='button'  onclick=\"checkResume('" + n.opendid + "')\" value='ç®€å†'> &nbsp" +
                            "<input class='accept' type='button' onclick=\"accepted('" + n.applyId + "')\" value='å½•ç”¨'> &nbsp" +
                            "<input class='refuse' type='button' onclick=\"refuse('" + n.applyId + "')\" value='æ‹’ç»'>" +
                            "</div>" +
                            "</div>";
                        $(".rtopbpb").append(item1);
                    });
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                }
            })
        }

        function accepted(applyId) {
           if(confirm("ç¡®å®šå½•ç”¨è¯¥æ±‚èŒè€…å—ï¼Ÿ")){
               $.ajax({
                   type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                   url: commomPath + "ApplyManagerServlet", //servletåœ°å€
                   data: {
                       applyId: applyId,
                       status: "å·²å½•ç”¨"
                   },
                   success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†
                       if (data == "1") {
                           alert("æ“ä½œæˆåŠŸï¼");
                           accpetStatus();
                       } else {
                           alert("æ“ä½œå¤±è´¥ï¼");
                       }
                   },
                   error: function () {
                       alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                   }
               })
           }
        }
        function refuse(applyId) {
            if (confirm("ç¡®è®¤ä¸å½•ç”¨è¯¥æ±‚èŒè€…å—ï¼Ÿ")) {
                $.ajax({
                    type: "POST",                            //ä¼ æ•°æ®çš„æ–¹å¼
                    url: commomPath + "ApplyManagerServlet", //servletåœ°å€
                    data: {
                        applyId: applyId,
                        status: "æœªå½•ç”¨"
                    },
                    success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                        if (data == "1") {
                            alert("æ“ä½œæˆåŠŸï¼");
                            refuseStatus();
                        } else {
                            alert("æ“ä½œå¤±è´¥ï¼");
                        }
                    },
                    error: function () {
                        alert("ä¿¡æ¯ä¼ è¾“é”™è¯¯ï¼");
                    }
                })
            }
        }
        function checkResume(openid) {
            $.cookie("opendid",openid,{path:"/"});
            window.location.href="resume.html";
        }
        function getCompany() {
            $.ajax({
                type: "post",                            //ä¼ æ•°æ®çš„æ–¹å¼
                url: commomPath + "getCompanyServlet", //servletåœ°å€
                data: {},
                datatype: "json",
                success: function (data) { //ä¼ æ•°æ®æˆåŠŸä¹‹åçš„æ“ä½œ   resultæ˜¯servletä¼ è¿‡æ¥çš„æ•°æ®  è¿™ä¸ªå‡½æ•°å¯¹resultè¿›è¡Œå¤„ç†ï¼Œè®©å®ƒæ˜¾ç¤ºåœ¨ è¾“å…¥æ¡†ä¸­
                    var com = $.parseJSON(data);
                    $(".top44").text(com[0].name);
                },
                error: function () {
                    alert("ä¿¡æ¯ä¼ è¾“å‘ç”Ÿé”™è¯¯ï¼");
                }
            });
        }
        function tiaozhuan2() {
            $("#xinxi").click(function () {
                window.location.href = "main.html";
            });
            $("#postRecriutment").click(function () {
                window.location.href = "postRecriutment.html";
            });
            $("#recriutManager").click(function () {
                window.location.href = "recriutManager.html";
            });
            $("#passwordManager").click(function () {
                window.location.href = "passwordManager.html";
            });
            $("#applyManager").click(function () {
                window.location.href = "applyManager.html";
            });
        }
        function tiaozhuan() {
            window.location.href = "comlogin.html";
        };
    </script>
</head>
<body>
<form>
    <div id="main">
        <div class="top">
            <div class="top1">
                <img src="../img/5454545.PNG" height="50px" width="50px" onclick="tiaozhuan()">
            </div>
            <div class="top2">
                æ±Ÿæµ·å¤§æ ¡å›­æ‹›è˜å¹³å°ä¼ä¸šç«¯
            </div>
            <div class="top33">
                <div class="top44">

                </div>
                <div class="top45">
                    <div class="top3">
                        <img class="tu" src="../img/111111.png" id="ddd">
                    </div>
                    <div class="top4">
                        <a href="comlogin.html" style="color:#bcbdcf ;font-size: 11px;">é€€å‡º</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="btttom">
            <div class="left">
                <div class="left3"></div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="xinxi" type="button" name="" value="ä¼ä¸šä¿¡æ¯"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" id="postRecriutment" type="button" name="" value="æ‹›è˜å‘å¸ƒ"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="recriutManager" value="èŒä½ç®¡ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="applyManager" value="åº”è˜å¤„ç†"/>
                    </div>
                </div>
                <div class="left1">
                    <div class="left11">
                        ğŸ
                    </div>
                    <div class="left12">
                        <input class="btn1" type="button" name="" id="passwordManager" value="å¯†ç ç®¡ç†"/>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="rtop">
                    <divc class="rtopp">
                        åº”è˜ä¿¡æ¯å¤„ç†
                    </divc>
                    <div class="rtopb">
                        <div class="rtopbp">
                            <div class="status">
                                <input class="waiting-btn" type="button" onclick="waitingStatus()" value="æœªå¤„ç†">
                                <input class="accpet-btn" type="button" onclick="accpetStatus()" value="å·²å½•ç”¨">
                                <input class="refuse-btn" type="button" onclick="refuseStatus()" value="æœªå½•ç”¨">
                            </div>
                            <div class="rtopbpp">
                                <div class="rtopbpp1">
                                    èŒä½åç§°
                                </div>
                                <div class="rtopbpp2">
                                    åº”è˜äºº
                                </div>
                                <div class="rtopbpp3">
                                    åº”è˜æ—¥æœŸ
                                </div>
                                <div class="rtopbpp4">
                                    å¤„ç†çŠ¶æ€
                                </div>
                                <div class="rtopbpp5">
                                    æ“ä½œ
                                </div>
                            </div>
                            <div class="rtopbpb">
                                <!--                               <div class="rtopbpb1">-->
                                <!--                                   <div class="rtopbpb11">-->
                                <!--                                       é˜¿æ–¯é¡¿æ’’æ—¦æ’’æ—¦-->
                                <!--                                   </div>-->
                                <!--                                   <div class="rtopbpb12">-->
                                <!--                                       ä½ å¥½-->
                                <!--                                   </div>-->
                                <!--                                   <div class="rtopbpb12">-->
                                <!--                                       ä½ å¥½-->
                                <!--                                   </div>-->
                                <!--                                   <div class="rtopbpb12">-->
                                <!--                                       ä½ å¥½-->
                                <!--                                   </div>-->
                                <!--                                   <div class="rtopbpb12">-->
                                <!--                                       <input type="button" id="edit" value="ç¼–è¾‘">-->
                                <!--                                       <input type="button" id="dele" value="åˆ é™¤">-->
                                <!--                                   </div>-->
                                <!--                               </div>-->
                            </div>
                        </div>
                        <div class="rtopbb">
                            <input class="chosse-page" type="button" id="one" value="é¦–é¡µ">
                            <input class="chosse-page" type="button" id="pre" value="ä¸Šä¸€é¡µ">
                            <input class="chosse-page" type="button" id="next" value="ä¸‹ä¸€é¡µ">
                        </div>
                    </div>
                </div>
                <div class="rbton">
                    ç‰ˆæƒæ‰€æœ‰ï¼šä¸ªäººæ¯•ä¸šè®¾è®¡
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>
